<!doctype html>

<form class="login" method="post" action="login">
  <input type="hidden" name="redirectTo" value="/">
  <input type="text" name="username">
  <input type="password" name="password">
  <button type="submit">login</button> go back to this page
</form>
<form class="login" method="post" action="login">
  <input type="hidden" name="redirectTo" value="/success.html">
  <input type="text" name="username">
  <input type="password" name="password">
  <button type="submit">login</button> go to success page
</form>
<button onclick="addGeneratedForm()">addGeneratedForm</button>
<script>
function addGeneratedForm(){
  var div = document.createElement('div');
  div.innerHTML = '<form class="login" method="post" action="login">\
    <input type="hidden" name="redirectTo" value="/success.html">\
    <input type="text" name="username">\
    <input type="password" name="password">\
    <button type="submit">login</button> generated\
  </form>';
  document.body.appendChild(div);
}
document.body.addEventListener('submit', function ajax(e){
  e.preventDefault();
  setTimeout(function(){
    e.target.submit();
  }, 1000);
}, false);
</script>